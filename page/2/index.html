<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Me and the Web </title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">


<meta property="og:title" content="Me and the Web ">
<meta property="og:site_name" content="Me and the Web"/>
<meta property="og:url" content="/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="website" />



<link href="/index.xml" rel="alternate" type="application/rss+xml" title="Me and the Web" />

<link rel="canonical" href="/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
<link href="/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.15" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight/default.css">

  
</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="">
  Frost Wong

</a>

</div>

  
<div class="container topline">
  
  Be a better WEB developer


</div>


</div>

  <nav class="container nav primary no-print">
  


  
<a href="/about">About</a>

<a href="/post" title="Show list of posts">Posts</a>

<a href="/tags" title="Show list of tags">Tags</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" href="mailto:frostwong@gmail.com">
  <span class="fa fa-envelope-square"></span><span>email</span></a>



<a id="contact-link-github" class="contact_link" href="https://github.com/lovelock">
  <span class="fa fa-github-square"></span><span>github</span></a>











<a id="contact-link-twitter" class="contact_link" href="https://twitter.com/frostwong">
  <span class="fa fa-twitter-square"></span><span>twitter</span></a>







</div>


  

</header>


<section id="main-content" class="container main_content homepage">
  <header class="container header">
    <h1>Me and the Web
</h1>

    <span>last update: <time datetime="2015-12-04T23:12:52Z">4 December at 11:12pm</time>
</span>

  </header>
  
  
    <article class="container content summary">
  <div class="container hat">
  <h2><a href="/2015/11/22/facebook%E7%9A%84%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/">Facebook的用户体验
</a>
</h2>

  <time datetime="2015-11-22">22 Nov, 2015</time>

</div>

  <p class="container content">
  
  
    上个星期登录Gmail突然发现多了好多Facebook的动态，仔细一看，原来我的头像都已经被别人换了。好吧，这还是我人生第一次帐号被盗的经历。 马上改密码，结果重置完密码要登录了，却跳转到验证用户身份页，放出来几张“好友”的照片，让你认出来这都是谁。 天了噜！！！！ 我怎么知道那都是谁！！！！我的账号被盗了啊！！！！那里面都是盗我的账号的人的图片，我怎么会认识？ 然后好玩的地方来了。 我来到Facebook的帮助页，找不到我想要的内容，因为并没有发现关于用好友的照片来验证身份的相关信息。 于是我想着也发起一个问题，等着大家来帮助我或者官方有人来帮我一下吧。但是发问题是需要登陆滴，好吧，就这样陷入了一个死循环。 我不理解的是，在用照片验证好友身份时是存在『我在这一步遇到了麻烦』这样的链接的，但为什么就没有考虑到用户的账户已经被盗并且内容全部被黑客替换的情况呢？ 我甚至恶意的猜测这黑客是深谙Facebook的身份认证机制的，窃取了你的账户之后马上上传一堆你不认识的人的照片，让你即使改了密码也无法登陆。 而且我看到帮助区有很多人都期待能得到Facebook官方的帮助，甚至有人说，那看起来很诱人，说是有官方的帮助，但实际上你问了问题从来得不到回复。 好吧，就是这样一个世界级的大公司。
  


</p>


  <div class="container readlink">
  <a href="/2015/11/22/facebook%E7%9A%84%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/">Read more &rarr;</a>

</div>


</article>

  
    <article class="container content summary">
  <div class="container hat">
  <h2><a href="/2015/11/03/vagrant%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/">Vagrant使用说明
</a>
</h2>

  <time datetime="2015-11-03">3 Nov, 2015</time>

</div>

  <p class="container content">
  
  
    创建自己的box 安装 最小化安装 用户vagrant，密码vagrant 这个安装的时候设置就好了，如果是CentOS会让你选择是否让这个用户做管理员，勾选就好了。其他的后面再设置。 2. 设置.ssh/authorized_keys mkdir -p /home/vagrant/.ssh wget --no-check-certificate https://raw.github.com/mitchellh/vagrant/master/keys/vagrant.pub -O /home/vagrant/.ssh/authorized_keys chmod 0700 /home/vagrant/.ssh chmod 0600 /home/vagrant/.ssh/authorized_keys chown -R vagrant /home/vagrant/.ssh 更新系统 Debian: sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade CentOS: sudo yum update 安装VirtualBox Guest Additions 设备-&gt;安装VirtualBox Guest Additions，就可以把相应的iso『放在』虚拟机的光驱里。只有安装了这些附加功能才能正常用端口映射和目录同步功能。 Debian apt-get install build-essential module-assistant m-a prepare cd /media/cdrom sh VBoxLinuxAdditions-x86.run CentOS sudo yum groupinstall &quot;Development Tools&quot; sudo yum install kernel-devel sudo mkdir /media/cdrom/ sudo mount
  


</p>


  <div class="container readlink">
  <a href="/2015/11/03/vagrant%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/">Read more &rarr;</a>

</div>


</article>

  
    <article class="container content summary">
  <div class="container hat">
  <h2><a href="/2015/11/01/symfony%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%E7%9A%84yaml%E9%85%8D%E7%BD%AE/">Symfony一对多关系的YAML配置
</a>
</h2>

  <time datetime="2015-11-01">1 Nov, 2015</time>

</div>

  <p class="container content">
  
  
    用YAML方式配置对象关系 这段时间在学习Symfony，看了Symfony Book和Symfony Cookbook，现在准备自己实现一个简单的博客系统，做一些简单的设计。 分析对象关系 首先考虑会操作哪些对象。 文章 Article 用户 User 评论 Comment 分类 Category 文章 对文章来说，它包含的属性有 - 标题 - 概要 - 正文 - 作者 - 创建时间 - 更新时间 而作者是属于用户的，其属性不应该在Article对象中，分析文章和作者的关系，应该是一篇文章只能有一个作者，而一个作者可以写很多篇文章，这就是doctrine中的OneToMany和ManyToOne了。总感觉用Annotation的方式写这个关系不是那么明确，所以今天特意用yml配置文件的方式来实现这个概念。后面再详细说，这里要清楚的是对文章来说 1. 文章对评论 OneToMany 2. 文章对作者 ManyToOne 3. 文章对分类 ManyToOne 用户 对用户来说，包含的属性有 - 用户名 - 密码 - 昵称 - 角色 前面已经说过，用户可以创建多篇文章，因此 1. 用户对文章 OneToMany 2. 用户对评论 OneToMany 评论 对评论来说，包含的属性有 - 标题 - 内容 - 作者 - 创建时间 和文章一样，它和作者是多对一的关系 评论对作者 ManyToOne 评论对文章 ManyToOne 分类 对分类来说，只有一个属性（最简单的情况） - 分类名称 它和文章是一对多的关系 1.
  


</p>


  <div class="container readlink">
  <a href="/2015/11/01/symfony%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%E7%9A%84yaml%E9%85%8D%E7%BD%AE/">Read more &rarr;</a>

</div>


</article>

  
    <article class="container content summary">
  <div class="container hat">
  <h2><a href="/2015/10/19/%E7%BB%99linux%E6%96%B0%E6%89%8B%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BB%BA%E8%AE%AE/">给Linux新手的一些建议
</a>
</h2>

  <time datetime="2015-10-19">19 Oct, 2015</time>

</div>

  <p class="container content">
  
  
    由于关注了知乎上Linux相关的一些话题，总是断断续续的有人邀请我回答各种Linux的问题——开始看到这种邀请的时候其实我是拒绝的，因为我觉得这种问题网上大把大把的答案，怎么还会有人问呢？后来回想了一下自己当初的经历才明白，原来就是有了太多的教程，而很多写教程的人自己都不怎么明白，怎么能讲的清楚呢？ 闲话少说，还是来谈谈自己的看法吧。 邀请我回答的这些问题中，以CentOS安装在个人笔记本或台式机上的问题居多，这里且不论这些提问者完全不想着去用搜索功能了，我就在想这个误区从哪里起始呢？ 多数人都知道《鸟哥的Linux私房菜》，甚至有人听别人说这是Linux入门的圣书，恨不得买来马上研读一番，而事实上多数买来的人也并没有读。重点是这本书里用的是CentOS。 于是乎很多不明就里的『学习者』就开始上网搜索如何在自己的笔记本上安装CentOS的教程，这其中会有一些比较极端，把原来的系统格掉，直接上Linux，而更多人则是选择双系统。 这里我想重申一下我在知乎上的观点，如果你想在实体机上体验Linux，那么不要在你的笔记本或者台式机上安装CentOS，Ubuntu/Fedora/OpenSUSE是可以尝试的，这其中还是比较推荐Ubuntu，毕竟它的桌面版就顾名思义就是为桌面而生的，经过这么多年的发展稳定性也已经不错了。相反，CentOS本身面向的就是那些需要用企业级的RHEL而又不想付费的企业用户，它的目标是安装在机房里整整齐齐的刀片机上，而不是你的笔记本——它没法忍受你的双显卡，这种协议的限制导致它不能用一些字体的补丁，导致字体看起来眼睛都要瞎了。 鉴于大多数初学者目前都是Windows『重度用户』的事实，我的建议是安装一个VirtualBox，到北京理工大学开源镜像站:[1]下载一个Debian的CD镜像，然后把Linux安装到虚拟机中。 下面是理由。 为什么是Debian？ 因为轻量，相比CentOS对新手更为友好，更新更为迅速。我就不说什么自由相关的了，这些情怀的东西等你体会到了它的好处以后再谈也不晚。 首先是轻量，我以前做运维的时候曾经蛋疼的测试过几个系统，时间是2013年12月份，测试的系统是Debian/FreeBSD/Ubuntu Server，忘记有没有CentOS了。测试方法就是在虚拟机的配置中逐步减少分配给虚拟机的内存大小，果然第一个挂掉的就是Ubuntu，在内存等于128M的时候已经提示无法开机，而当我把FreeBSD的内存设置到64M的时候它仍然很流畅，并且内存占用只有10M左右，而Debian比前者占用要稍高一些，但也能保证流畅运行。考虑到大多数同学的2G或者4G的内存，所以虚拟机能轻量就轻量吧。至于FreeBSD，毕竟不是主流，参考资料也比较少，虽然我自己比较喜欢，但也仅仅是喜欢，并不推荐。 那友好在什么地方呢？ 友好体现在默认开启的服务上 安装时有多种选择，你可以像我一样安装一个没有只有系统基本组件的裸系统，也可以安装一个带基本的桌面环境的系统，甚至还可以选择一些服务，如邮件服务、HTTP服务等。这里我推荐还是最小安装。安装过程很直观。当然现在的CentOS的安装器也不错，只是没有选择安装类型而已。 Debian在安装过程中会让你填写一个在线的镜像源地址，这里可以填写我上面的推荐，安装完成开机以后你就可以用这个镜像源更新系统了。很方便吧？另外很重要的一点是安装完之后的系统默认网络服务是开启的，也就是说你是直接可以上网的，这也是CentOS让我很不解的一点，从我接触到它开始，它一直是默认不开启网络服务的，这让一些新手很受伤。 还有一点很重要，对很多想要接触Linux的同学来说，很可能就是为了用LAMP/LNMP的环境，但用CentOS时你可能会莫名其妙的遇到403错误，然后你找遍各种论坛，费了半天劲，原来就是SELinux惹的祸。这个玩意我们平时虽然不怎么用得到，但真的很让你摸不着看头脑。我也没有细究其使用，通常大家都关掉了，因为实在太难用了。 多说两句，它的大概意思就是每个文件（目录在Linux看来也是文件）除了我们知道的rwx权限，i(mmutable)还有粘滞位(Sticky bit)之外，还有另外一套权限机制，也就是所谓的上下文信息了。举例来说，它给可以提供Web服务的目录一个特殊权限，如果你在Apache/Nginx里配置了别的vhost，比如默认是在/var/www目录下，而你在/srv/http目录下新建了vhost，那就别想好好过了，因为后者是不具备提供Web服务的权限的，反过来说，外界是无法通过Http请求访问这个目录里的内容的，所以你就得到了403。当然如果知道问题症结的话也很容易解决，只需要给后者赋予同样的上下文信息即可——然并卵，我们通常的做法是 1. 临时做法sudo setenforce 0 2. 永久做法是把/etc/sysconfig/selinux中的SELINUX=enforcing 改成SELINUX=disabled，重启 我要说的是Debian默认就不开启这个让人迷惑的功能。 至于iptables这个大神器当然是要学的，不过好在现在两个平台上都有了简单的前端工具，Debian系有ufw，一看这名字就知道是Ubuntu贡献的，RH平台上有firewalld。值得一提的是ufwb本身就是在iptables之外让用户可以更直观的操作防火墙，而后者则是直接让iptables做了备选方案，可说是一个替代iptables的服务，当然底层也还是ipfilter(这里我不太确定它封装的是iptables还是ipfilter)。默认没有安装iptables-services，而如果要用iptables，就需要 sudo systemctl mask firewalld sudo systemctl sopt firewalld sudo systemctl unmask iptables sudo systemctl start iptables sudo systemctl enable iptables 2015-10-25更新 刚刚又发现一个神奇的东西，因为昨天花了点时间捣鼓了一下Vagrant，发现这玩意儿还真是出奇的好用，又能用Linux上的运行环境又能用宿主机上的IDE，虽然我是个Vim党，但也无法阻挡PhpStorm的诱惑啊。 好了，我想说的是这个 这就是一个社区的偏好问题了，前面的文章也已经提到过字符集的问题，Debian竟然从发行版打包时优化了这个问题，赞一个。 友好体现在方便的软件安装上 曾经我一度以为Windows的软件安装方式是最好的，下一步下一步，多方便，而Linux还要找这种包，配置、编译、安装，多麻烦。直到我了解到原来还有apt-get这种包管理利器。然而，你Debian有apt-get，那我CentOS有yum啊，怎么你就能胜我一筹呢？原因并不在于两种工具的区别，当然我更喜欢apt-get，毕竟有apt-get autoremove，而在于软件仓库。在Debian的仓库里，有vim-nox这个包含了所有脚本语言支持的Vim发行版——如果可以这么说的话，让你在安装提高效率的Vim插件的时候不必受限于这些因素；有下载神器axel，一个axel -n 10 some_url撑满你的带宽，过多的就不解释了。 友好体现在便捷的系统升级 我个人是喜欢用Debian Sid，也就是不稳定版的，是因为它的软件包最新，我说这话你不要不以为然，当你发现一个很新奇的东西想尝试一下，看下自己的CentOS，这个库太老，这个库仓库里没有，这时候你就知道一个apt-get update &amp;&amp; apt-get dist-upgrade是多么爽了，永远保持最新。 为什么是北京理工大学镜像站？ 这个就是细枝末节的东西了，我最开始是用校内的北京航空航天大学开源镜像站的，只可惜它只在校内可以访问，离开学校以后就用中国科技大学开源镜像站，这个可以说是国内镜像站里面看起来最现代化、文档最齐全的，但毕竟服务器在合肥（？），还不如找个北京的，于是就看到了我们的兄弟院校北京理工。速度不错。 为什么是VirtualBox？ 当然，除了VB，你在Windows上还有VMware Workstation和VMware
  


</p>


  <div class="container readlink">
  <a href="/2015/10/19/%E7%BB%99linux%E6%96%B0%E6%89%8B%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BB%BA%E8%AE%AE/">Read more &rarr;</a>

</div>


</article>

  
    <article class="container content summary">
  <div class="container hat">
  <h2><a href="/2015/10/17/mysql%E7%9C%9Futf8%E5%90%8E%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">MySQL真·UTF8后遇到的问题
</a>
</h2>

  <time datetime="2015-10-17">17 Oct, 2015</time>

</div>

  <p class="container content">
  
  
    昨天写了一篇MySQL/MariaDB将字符集从utf8迁移到utf8mb4的总结，今天继续我的最佳实践，想到在设计数据库时要考虑到用户的email是不能重复的，所以想给它加上一个UNI标记，然后遇到了这样一个问题： 我当然不能放过这个学习的机会，猜想就是因为昨天的修改引起的。于是找到了这篇问答。 MyISAM引擎默认的key的长度是1000 Bytes，而InnoDB引擎相应的是767 Bytes，那么问题来了。当我把email字段设置为varchar(255)时，它的最大长度是255个字符，这意味着什么呢？昨天已经说过，utf8mb4引擎对应一个字符长度是4，那么就是 255 x 4 = 1020 &gt; 767 另一方面，utf8时， 255 * 3 = 765 &lt; 767 完美！ 现在你知道为什么你公司数据里相当相当多的字符串的字段都是varchar(255)了吧，因为即使用utf8，使用varchar(256)的字段在作为索引时也会出错。
  


</p>


  <div class="container readlink">
  <a href="/2015/10/17/mysql%E7%9C%9Futf8%E5%90%8E%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">Read more &rarr;</a>

</div>


</article>

  
  
<div class="container pagination">
  


<a aria-label="First" href="/">
  <span aria-hidden="true">««</span>
</a>

<a aria-label="Previous" href="/">
  <span aria-hidden="true">«</span>
</a>


<a href="/">
  1
</a>

<a class="active" href="/page/2/">
  2
</a>

<a href="/page/3/">
  3
</a>

<a href="/page/4/">
  4
</a>

<a href="/page/5/">
  5
</a>

<a href="/page/6/">
  6
</a>

<a href="/page/7/">
  7
</a>

<a href="/page/8/">
  8
</a>

<a href="/page/9/">
  9
</a>

<a href="/page/10/">
  10
</a>


<a aria-label="Next" href="/page/3/">
  <span aria-hidden="true">»</span>
</a>

<a aria-label="Last" href="/page/10/">
  <span aria-hidden="true">»»</span>
</a>


</div>


</section>

      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  
<a href="/license">license</a>


  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  
  Learn what you eager


</div>


  
<div class="container copyright">
  
  &copy; 2013-2015 Frost Wong. All rights reserved.


</div>


</div>

</footer>

    </main>
    
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//unixagain.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




    
  </body>
</html>

